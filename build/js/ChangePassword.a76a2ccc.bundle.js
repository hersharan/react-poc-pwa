(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{599:function(e,t,a){"use strict";a.d(t,"a",function(){return s}),a.d(t,"b",function(){return i}),a.d(t,"d",function(){return c}),a.d(t,"f",function(){return l}),a.d(t,"e",function(){return d}),a.d(t,"c",function(){return m});var n=a(2),r=a(1),o=a.n(r);function s(e,t){var a=e,r=[];return t&&0!==t.length||(r=e),t&&t.length>0&&e&&e.length>0&&a.forEach(function(e){var a=null;Object.prototype.hasOwnProperty.call(e,"userBookmarkStatus")||Object.prototype.hasOwnProperty.call(e,"userFavouriteStatus")||Object.prototype.hasOwnProperty.call(e,"favourites")||Object.prototype.hasOwnProperty.call(e,"bookmarks")||Object.prototype.hasOwnProperty.call(e,"status")?a=e:t.forEach(function(t){(Object.prototype.hasOwnProperty.call(e,"nid")&&e.nid===t.nid||Object.prototype.hasOwnProperty.call(e,"tid")&&e.tid===t.tid)&&(a=Object(n.a)({},e,t))}),r.push(a)}),r}function i(){return window.innerWidth<769?"xs":window.innerWidth<992&&window.innerWidth>768?"sm":window.innerWidth<1199&&window.innerWidth>991?"md":"lg"}function c(){return o.a.createElement("span",{className:"inline-loading"},o.a.createElement("span",null,"."),o.a.createElement("span",null,"."),o.a.createElement("span",null,"."))}function l(e,t){var a=e;return a&&0===a.length?t:t&&0!==t.length?(t.forEach(function(t,n){e.forEach(function(e,n){t.nid===e.nid&&(a[n]=t)})}),a):void 0}function d(){var e=localStorage.getItem("user"),t=JSON.parse(e);t&&!t.policyFlag&&document.getElementById("toolbar-administration")&&document.getElementById("toolbar-administration").remove()}function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0===e)return"0 Bytes";var a=t<0?0:t,n=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,n)).toFixed(a))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][n]}function m(){return function(e){"storage"in navigator&&"estimate"in navigator.storage?navigator.storage.estimate().then(function(t){var a={msg:"Using ".concat(u(t.usage)," out of ").concat(u(t.quota)," bytes."),estimate:t};e({type:"FETCH_BROWSER_CACHE",payload:a})}):e({type:"FETCH_BROWSER_CACHE",payload:null})}}},607:function(e,t,a){},608:function(e,t,a){e.exports=a.p+"images/Logo.31e15bfe.svg"},609:function(e,t,a){"use strict";var n=a(1),r=a.n(n),o=(a(607),a(608)),s=a.n(o);t.a=function(){return r.a.createElement("header",{className:"col-12 top-header"},r.a.createElement("div",{className:"logo text-center"},r.a.createElement("a",{href:"/login"},r.a.createElement("img",{src:s.a,alt:"Aramis and Designer Fragrances"}))))}},611:function(e,t,a){},612:function(e,t,a){"use strict";var n=a(87),r=a.n(n),o=a(74);var s={getLoginBackground:function(){return function(e){e({type:"FETCH_LOGIN_BACKGROUND"}),r.a.get("/api/v1/loginBackgroundImage?_format=json").then(function(t){e({type:"FETCH_LOGIN_BACKGROUND_SUCCESS",payload:t.data})}).catch(function(t){e({type:"FETCH_LOGIN_BACKGROUND_FAILURE",payload:t}),e({type:"ADD_ERROR",payload:t})})}},submitLogin:function(e,t){return Object(o.d)(),function(a){a({type:"USER_LOGIN"}),r.a.post("/api/v1/login?_format=json",{username:e,password:t}).then(function(e){Object(o.b)(e.data),a({type:"USER_LOGIN_SUCCESS",payload:e.data})}).catch(function(e){a({type:"USER_LOGIN_FAILURE",payload:e.response}),a({type:"ADD_ERROR",payload:e})})}}};t.a=s},623:function(e,t,a){"use strict";var n=a(87),r=a.n(n);var o={submitEmailForReset:function(e){return function(t){t({type:"RESET_EMAIL"}),r.a.post("/api/v1/user/lost-password?_format=json",{mail:e}).then(function(e){t({type:"RESET_EMAIL_SUCCESS",payload:e.data})}).catch(function(e){t({type:"RESET_EMAIL_FAILURE",payload:e.response}),t({type:"ADD_ERROR",payload:e})})}},submitPasswordForReset:function(e,t,a){return function(n){n({type:"CHANGE_PASSWORD"}),r.a.post("/api/v1/user/lost-password-reset?_format=json",{mail:e,tempPass:t,newPass:a}).then(function(e){n({type:"CHANGE_PASSWORD_SUCCESS",payload:e.data})}).catch(function(e){n({type:"CHANGE_PASSWORD_FAILURE",payload:e.response}),n({type:"ADD_ERROR",payload:e})})}}};t.a=o},669:function(e,t,a){"use strict";a.r(t);var n=a(69),r=a(70),o=a(73),s=a(71),i=a(72),c=a(1),l=a.n(c),d=a(99),u=a(586),m=a(8),p=a(575),g=a(7),f=a.n(g),h=a(183),E=a(599),w=a(181),b=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(o.a)(this,Object(s.a)(t).call(this,e))).state={show:!0,form:{email:"",password:"",confirmPassword:"",otp:""}},a.handleSubmit=a.handleSubmit.bind(Object(m.a)(a)),a.loadingRender=a.loadingRender.bind(Object(m.a)(a)),a.checkStatus=a.checkStatus.bind(Object(m.a)(a)),a.resend=a.resend.bind(Object(m.a)(a)),a}return Object(i.a)(t,e),Object(r.a)(t,[{key:"handleSubmit",value:function(e){this.setState({form:e}),e.email&&e.otp&&e.password&&e.confirmPassword&&this.props.onSubmitForm(e.email,e.otp,e.password)}},{key:"loadingRender",value:function(){return l.a.createElement("div",{className:"text-center"},Object(E.d)())}},{key:"checkStatus",value:function(){var e=this.props,t=e.fetching,a=e.fetched,n=e.error;return t||a&&null===n?l.a.createElement("div",{className:"login-status"},this.loadingRender()):a&&n&&n.data&&n.data.message?l.a.createElement("div",{className:"text-center"},l.a.createElement("p",null,n.data.message)):void 0}},{key:"resend",value:function(){this.state.form.email&&""!==this.state.form.email&&this.props.resend(this.state.form.email)}},{key:"render",value:function(){var e=this,t=this.state.form,a=t.email,n=t.password,r=t.confirmPassword,o=t.otp;return l.a.createElement(p.d,{initialValues:{email:a,password:n,confirmPassword:r,otp:o},validate:function(e){var t={};return e.email?/\s?\w+\s/i.test(e.email)&&(t.email="Invalid username"):t.email="Required",e.otp||(t.otp="Required"),e.password||(t.password="Required"),e.confirmPassword?e.password!==e.confirmPassword&&(t.confirmPassword="Password does not match"):t.confirmPassword="Required",t},onSubmit:function(t,a){var n=a.setSubmitting;setTimeout(function(){n(!1),e.handleSubmit(t)},400)},enableReinitialize:!0},function(t){var a=t.isSubmitting;return l.a.createElement(p.c,{className:f()({disabled:e.props.fetching||e.props.fetched&&null===e.props.error})},e.props.changePassword&&e.props.changePassword.message?l.a.createElement("div",{className:"text-center"},e.props.changePassword.message):null,e.checkStatus(),l.a.createElement("div",{className:"extended"},l.a.createElement(h.b,{className:"forget-password mb-4",to:"/login"},w.a)),l.a.createElement(p.b,{type:"text",name:"email",placeholder:"Email Address"}),l.a.createElement(p.a,{name:"email",component:"div",className:"error-msg"}),l.a.createElement(p.b,{type:"text",name:"otp",placeholder:"Reset Code"}),l.a.createElement(p.a,{name:"otp",component:"div",className:"error-msg"}),l.a.createElement(p.b,{type:"password",name:"password",placeholder:"Enter New Password"}),l.a.createElement(p.a,{name:"password",component:"div",className:"error-msg"}),l.a.createElement(p.b,{type:"password",name:"confirmPassword",placeholder:"Re-Type New Password"}),l.a.createElement(p.a,{name:"confirmPassword",component:"div",className:"error-msg"}),l.a.createElement("div",{className:"more-link"},l.a.createElement("button",{type:"submit",className:f()("btn btn-outline-secondary text-uppercase",{disabled:a})},w.v)),l.a.createElement("div",{className:"extended"},l.a.createElement(h.b,{className:"forget-password underline",to:"/reset-password"},w.O)))})}}]),t}(c.Component),y=a(623),v=a(612),R=(a(611),a(609)),O=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return(a=Object(o.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(i)))).state={background:""},a}return Object(i.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.props.getLoginBackground()}},{key:"componentWillReceiveProps",value:function(e){void 0!==e.loginBackground.backGroundImage&&this.setState({background:e.loginBackground.backGroundImage}),e.fetchedChangePassword&&e.changePassword&&e.changePassword.message&&""!==e.changePassword.message&&e.props.history.push("/login")}},{key:"render",value:function(){var e=this.props,t=e.fetchingChangePassword,a=e.fetchedChangePassword,n=e.changeError,r=e.changePassword;return l.a.createElement(u.a,null,l.a.createElement("div",{className:"user-login-wrapper col-12",style:{backgroundImage:"url("+this.state.background+")"}},l.a.createElement(R.a,null),l.a.createElement("div",{className:"user-login"},l.a.createElement(b,{onSubmitForm:this.props.submitPasswordForReset,fetching:t,fetched:a,error:n,changePassword:r,resend:this.props.submitEmailForReset}))))}}]),t}(c.Component);var P=Object(d.b)(function(e){var t=e.resetForget,a=t.changeError,n=t.changePassword,r=t.fetchingChangePassword,o=t.fetchedChangePassword,s=t.resetError,i=t.emailReset,c=t.fetchingEmailReset,l=t.fetchedEmailReset,d=e.userLogin;return{changeError:a,changePassword:n,fetchingChangePassword:r,fetchedChangePassword:o,fetchingLoginBackground:d.fetchingLoginBackground,fetchedLoginBackground:d.fetchedLoginBackground,userLoginError:d.userLoginError,loginBackground:d.loginBackground,resetError:s,emailReset:i,fetchingEmailReset:c,fetchedEmailReset:l}},function(e){return{submitPasswordForReset:function(t,a,n){return e(y.a.submitPasswordForReset(t,a,n))},getLoginBackground:function(){return e(v.a.getLoginBackground())},submitEmailForReset:function(t){return e(y.a.submitEmailForReset(t))}}})(O);t.default=P}}]);
//# sourceMappingURL=ChangePassword.a76a2ccc.bundle.js.map