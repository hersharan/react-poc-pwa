{"version":3,"sources":["js/helpers/utils.js","js/components/UserLogout/logout.actions.js","js/components/UserLogout/UserLogout.js"],"names":["filterData","data","activities","newData","filteredData","length","forEach","item","node","Object","prototype","hasOwnProperty","call","activity","nid","tid","_Users_jogindar_singh_Sites_react_poc_pwa_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__","push","getBrowserWidth","window","innerWidth","inlineLoading","react__WEBPACK_IMPORTED_MODULE_1___default","a","createElement","className","replaceData","newdata","actualData","i","itm","j","removeDrupalToolbar","user","localStorage","getItem","userDetails","JSON","parse","policyFlag","document","getElementById","remove","formatBytes","bytes","decimals","arguments","undefined","dm","Math","floor","log","parseFloat","pow","toFixed","getStorageLimit","dispatch","navigator","storage","estimate","then","msg","concat","usage","quota","type","payload","axios__WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","axios__WEBPACK_IMPORTED_MODULE_0___default","n","react_cookies__WEBPACK_IMPORTED_MODULE_1__","react_cookies__WEBPACK_IMPORTED_MODULE_1___default","_helpers_authorization__WEBPACK_IMPORTED_MODULE_2__","_helpers_appConstants__WEBPACK_IMPORTED_MODULE_3__","logoutActions","submitLogout","accessToken","cookies","load","token","clear","axios","get","csrfToken","post","headers","Content-Type","Authorization","X-CSRF-Token","response","status","removeCookie","location","catch","error","HOMEPAGE","UserLogout","this","props","logout","react__WEBPACK_IMPORTED_MODULE_5___default","Component","connectedComponent","connect","state","_state$userLogin","userLogin","fetchingLogoutInfo","fetchedLogoutInfo","userLogout"],"mappings":"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","file":"js/UserLogout.7d14d38b.bundle.js","sourcesContent":["import React from 'react';\n\n/*\n* Tabs on scroll handling.\n*  It fixes the tabs on scroll near the header.\n*\n*/\nexport function handleScroll() {\n  window.addEventListener('load', () => {\n    const navbar = document.getElementsByClassName('nav-tabs');\n    // Get the offset position of the navbar\n    const sticky = navbar[0].offsetTop;\n    window.addEventListener('scroll', () => {\n      const { scrollTop } = document.documentElement;\n      if (scrollTop > (sticky - 70)) {\n        navbar[0].classList.add('nav-fixed');\n        navbar[0].parentNode.classList.add('child-fixed');\n      } else {\n        navbar[0].classList.remove('nav-fixed');\n        navbar[0].parentNode.classList.remove('child-fixed');\n      }\n    });\n  });\n}\n\nexport function filterData(data, activities) {\n  const newData = data;\n  let filteredData = [];\n  if (!activities || activities.length === 0) {\n    filteredData = data;\n  }\n  if (activities && activities.length > 0 && data && data.length > 0) {\n    newData.forEach((item) => {\n      let node = null;\n      if (Object.prototype.hasOwnProperty.call(item, 'userBookmarkStatus')\n        || Object.prototype.hasOwnProperty.call(item, 'userFavouriteStatus')\n        || Object.prototype.hasOwnProperty.call(item, 'favourites')\n        || Object.prototype.hasOwnProperty.call(item, 'bookmarks')\n        || Object.prototype.hasOwnProperty.call(item, 'status')) {\n        node = item;\n      } else {\n        activities.forEach((activity) => {\n          if ((Object.prototype.hasOwnProperty.call(item, 'nid') && item.nid === activity.nid)\n            || (Object.prototype.hasOwnProperty.call(item, 'tid') && item.tid === activity.tid)) {\n            node = { ...item, ...activity };\n          }\n        });\n      }\n\n      filteredData.push(node);\n    });\n  }\n\n  return filteredData;\n}\n\nexport function getBrowserWidth() {\n  if (window.innerWidth < 769) return 'xs';\n  if (window.innerWidth < 992 && window.innerWidth > 768) return 'sm';\n  if (window.innerWidth < 1199 && window.innerWidth > 991) return 'md';\n  return 'lg';\n};\n\nexport function getUrlByContentType(type, nid, tid) {\n  let link = '';\n  if (type === 'product_detail') {\n    link = \"/product/\" + nid\n  }\n  else if (type === 'level_interactive_content') {\n    link = \"/interactive-content/\" + nid\n  }\n  else if (type === 'tools' || type === 'tools-pdf') {\n    if (tid && tid !== null) {\n      link = `/folders/${tid}/${nid}`\n    } else {\n      link = \"/folders/\" + nid\n    }\n  }\n  else if (type === 'stories') {\n    link = \"/trending/\" + nid;\n  }\n  return link;\n}\n\nexport function inlineLoading() {\n  return <span className=\"inline-loading\"><span>.</span><span>.</span><span>.</span></span>\n}\n\n// attach the .equals method to Array's prototype to call it on any array\nexport function compareArray(array1, array2) {\n  // if the other array is a falsy value, return\n  if (!array2)\n    return false;\n\n  // compare lengths - can save a lot of time\n  if (array1.length !== array2.length)\n    return false;\n\n  for (var i = 0, l = array1.length; i < l; i++) {\n    // Check if we have nested arrays\n    if (array1[i] instanceof Array && array2[i] instanceof Array) {\n      // recurse into the nested arrays\n      if (!compareArray(array1[i], array2[i]))\n        return false;\n    }\n    else if (array1[i] !== array2[i]) {\n      // Warning - two different object instances will never be equal: {x:20} != {x:20}\n      return false;\n    }\n  }\n\n  return true;\n}\n\nexport function uniqueData(data) {\n  let flags = [], output = [], l = data.length - 1, i;\n  let filteredData = data.filter((item) => {\n    return item !== null;\n  })\n  if (filteredData && filteredData.length !== 0) {\n    for (i = l; i >= 0; i--) {\n      if (flags[filteredData[i].nid]) continue;\n      flags[filteredData[i].nid] = true;\n      output.push(filteredData[i]);\n    }\n  }\n\n  return output;\n}\n\n\nexport function replaceData(data, newdata) {\n  let actualData = data;\n  if (actualData && actualData.length === 0) {\n    return newdata;\n  }\n  else if (newdata && newdata.length !== 0) {\n    newdata.forEach((item, i) => {\n      data.forEach((itm, j) => {\n        if (item.nid === itm.nid) {\n          actualData[j] = item;\n        }\n      })\n    })\n\n    return actualData;\n  }\n}\n\nexport function removeDrupalToolbar() {\n  const user = localStorage.getItem('user');\n  const userDetails = JSON.parse(user);\n  if (userDetails && !userDetails.policyFlag) {\n    // if Drupal Admin bar presents then remove.\n    if (document.getElementById('toolbar-administration')) {\n      document.getElementById('toolbar-administration').remove();\n    }\n  }\n}\n\nfunction formatBytes(bytes, decimals = 2) {\n  if (bytes === 0) return '0 Bytes';\n\n  const k = 1024;\n  const dm = decimals < 0 ? 0 : decimals;\n  const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];\n\n  const i = Math.floor(Math.log(bytes) / Math.log(k));\n\n  return parseFloat((bytes / Math.pow(k, i)).toFixed(dm)) + ' ' + sizes[i];\n}\n\nexport function getStorageLimit() {\n  return ((dispatch) => {\n    if ('storage' in navigator && 'estimate' in navigator.storage) {\n      navigator.storage.estimate()\n        .then(function (estimate) {\n          let data = {\n            msg: `Using ${formatBytes(estimate.usage)} out of ${formatBytes(estimate.quota)} bytes.`,\n            estimate: estimate,\n          };\n          dispatch({ type: 'FETCH_BROWSER_CACHE', payload: data });\n        });\n    } else {\n      dispatch({ type: 'FETCH_BROWSER_CACHE', payload: null });\n    }\n  })\n}","import axios from 'axios';\nimport cookies from 'react-cookies';\nimport { removeCookie } from '../../helpers/authorization';\nimport { HOMEPAGE } from '../../helpers/appConstants';\n\nfunction submitLogout() {\n  const accessToken = cookies.load('access_token');\n  const token = accessToken && accessToken.accessToken;\n  localStorage.clear();\n  return ((dispatch) => {\n    dispatch({ type: \"USER_LOGOUT\" });\n    axios.get('/session/token').then((csrfToken) => {\n      axios.post('/api/v1/logout?_format=json', { token }, {\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`,\n          'X-CSRF-Token': csrfToken.data,\n        },\n      })\n        .then((response) => {\n          dispatch({ type: \"USER_LOGOUT_SUCCESS\", payload: response.data })\n          if (response.status === 200) {\n            removeCookie();\n            document.location = '/login';\n          }\n        })\n        .catch((error) => {\n          dispatch({ type: \"USER_LOGOUT_FAILURE\", payload: error.response })\n          dispatch({ type: \"ADD_ERROR\", payload: error })\n          document.location = HOMEPAGE;\n        });\n    });\n  });\n}\n\nconst logoutActions = {\n  submitLogout\n}\n\nexport default logoutActions;","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\n\nimport logoutActions from './logout.actions';\nimport { inlineLoading } from '../../helpers/utils';\n\nclass UserLogout extends Component {\n\n  componentDidMount() {\n    this.props.logout();\n  }\n\n  render() {\n    return (\n      <div className=\"user-login-wrapper\">\n        <div className=\"user-logout text-center m-5\">\n          Please Wait While We Log You Out {inlineLoading()}\n        </div>\n      </div>\n    )\n  }\n}\n\nfunction mapStateToProps(state) {\n  const { fetchingLogoutInfo,\n    fetchedLogoutInfo,\n    userLogout, error } = state.userLogin;\n\n  return {\n    fetchingLogoutInfo,\n    fetchedLogoutInfo,\n    userLogout, error\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    logout: () => dispatch(logoutActions.submitLogout()),\n  }\n}\n\nconst connectedComponent = connect(mapStateToProps, mapDispatchToProps)(UserLogout);\n\nexport default connectedComponent;\n"],"sourceRoot":""}